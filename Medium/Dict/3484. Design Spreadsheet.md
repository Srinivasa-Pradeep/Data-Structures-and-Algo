# DSA Revision Note: [Design Spreadsheet](https://leetcode.com/problems/design-spreadsheet/description/)

## Problem Summary

We are asked to implement a simple **Spreadsheet** class with the following operations:

1. **Spreadsheet(rows)** – initializes a spreadsheet with 26 columns ('A' to 'Z') and the given number of rows. All cells start at 0.
2. **setCell(cell, value)** – sets a cell (like `"A1"`) to a given value.
3. **resetCell(cell)** – resets a cell back to 0.
4. **getValue(formula)** – evaluates a formula of the form `"=X+Y"`, where X and Y are either numbers or cell references. Missing cells are treated as 0.

---

## Step 1: Understanding the Problem

* The spreadsheet can be thought of as a **grid**, but using a **2D array** is not necessary.
* Key insight: we only need to **store non-zero cells** in a dictionary.
* Formula parsing: always of the form `"=X+Y"`. So we need to:

  1. Remove the `"="`.
  2. Split by `"+"`.
  3. Evaluate each side.

We realized that **missing cells should default to 0**, so the dict lookup must handle missing keys safely.

---

## Step 2: Choosing the Data Structure

* Initially thought about 2D arrays → too rigid and wasteful for large grids.
* **Dictionary** approach:

  * Key: cell name, e.g., `"A1"`
  * Value: integer stored in that cell
* Missing key → value is 0 (using `dict.get(key, 0)`).

---

## Step 3: Breaking Down the Class Methods

### Constructor (`__init__`)

* Create an **empty dict** to store cell values.
* Rows don’t need to be stored for dict logic (optional, only for validation).

### setCell(cell, value)

* **Add/update** the key in dict: `self.placey[cell] = value`.

### resetCell(cell)

* **Remove** the key from dict to behave like the cell is never set.
* Safe pop: `self.placey.pop(cell, 0)` → avoids KeyError if the cell doesn’t exist.

### getValue(formula)

* Remove the `=` sign.
* Split the formula by `"+"` → get `X` and `Y`.
* Evaluate each part:

  * If all digits → convert to int
  * Else → look up in dict using `dict.get(key, 0)`
* Return the sum.

---

## Step 4: Challenges / Walls We Hit

1. **Parsing formula**:

   * Initial confusion: how to separate `X` and `Y`.
   * Solution: slice off `=` and split by `"+"`.

2. **Cell vs number distinction**:

   * How to know if `"6"` is a number or `"A1"` is a cell.
   * Solution: `str.isdigit()` to distinguish.

3. **Safe dict access**:

   * Using `self.placey[X]` directly could crash if X doesn’t exist.
   * Solution: `self.placey.get(X, 0)` for safe default.

4. **Resetting cells**:

   * Using `del` or naive `pop` could error if key missing.
   * Solution: `pop(key, 0)` → safe and clean.

5. **Simplifying getValue**:

   * Initially had multiple `if` checks for digits
   * Optimized using one-liner logic:

     ```
     x = int(X) if X.isdigit() else self.placey.get(X,0)
     y = int(Y) if Y.isdigit() else self.placey.get(Y,0)
     return x + y
     ```

---

## Step 5: How We Picked Everything

* Start with **dict** → flexible, O(1) lookup.
* Treat **missing cells as 0** → simplifies logic.
* Split formula → separate evaluation → combine results.
* Handle safe access → avoid errors with `.get()` or `pop(key, default)`.
* Optimize final code for clarity and readability.

---

## Step 6: Final Solution

```python
class Spreadsheet:

    def __init__(self, rows: int):
        self.placey = {}

    def setCell(self, cell: str, value: int) -> None:
        self.placey[cell] = value
        
    def resetCell(self, cell: str) -> None:
        self.placey.pop(cell, 0)     

    def getValue(self, formula: str) -> int:
        X, Y = formula[1:].split("+")
        x = int(X) if X.isdigit() else self.placey.get(X, 0)
        y = int(Y) if Y.isdigit() else self.placey.get(Y, 0)
        return x + y
```

---

## Step 7: Key Takeaways

1. **Dicts are powerful** for sparse data structures.
2. **Safe lookups** (`get`) avoid runtime errors.
3. **Breaking problems into tiny steps** (parse → evaluate → sum) makes them manageable.
4. **Optimizing while keeping readability** matters more than squeezing everything into one line.

---

