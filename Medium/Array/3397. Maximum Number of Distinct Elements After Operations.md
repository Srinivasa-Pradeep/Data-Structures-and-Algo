## [Maximum Possible Number of Distinct Elements After Operations](https://leetcode.com/problems/maximum-number-of-distinct-elements-after-operations/description/)-Notes

### üßæ Problem Statement

You are given an integer array `nums` and an integer `k`.

You are allowed to perform the following **operation** on each element of the array **at most once**:

* Add an integer in the range `[-k, k]` to the element.

Return the **maximum possible number of distinct elements** in `nums` after performing the operations.

---

### üß† Example 1

**Input:**
`nums = [1, 2, 2, 3, 3, 4], k = 2`

**Output:**
`6`

**Explanation:**
`nums` can be changed to `[-1, 0, 1, 2, 3, 4]` after performing operations on the first four elements.
All are distinct ‚Üí answer = 6.

---

### üß† Example 2

**Input:**
`nums = [4, 4, 4, 4], k = 1`

**Output:**
`3`

**Explanation:**
By adding `-1` to `nums[0]` and `+1` to `nums[1]`,
`nums` changes to `[3, 5, 4, 4]`, giving 3 distinct elements.

---

### üß© Code

```python
class Solution:
    def maxDistinctElements(self, nums: List[int], k: int) -> int:
        if 2 * k + 1 >= len(nums):
            return len(nums)
        
        nums.sort()
        pre = -inf
        ans = 0
        for x in nums:
            x = min(max(x - k, pre + 1), x + k)
            if x > pre:
                ans += 1
            pre = x
        return ans
```

---

### üí° Intuition

We can shift each number within `[-k, k]` to make it distinct from the previous ones.
After sorting:

* Keep track of the **last chosen distinct number** (`pre`).
* For each number `x`, choose the **smallest valid** value that is:

  * ‚â• `pre + 1` (to be distinct),
  * within the allowed range `[x - k, x + k]`.

---

### ‚öôÔ∏è Algorithm

1. If the whole array can fit within one large shift window (`2k + 1 ‚â• n`),
   ‚Üí every number can be made unique ‚Üí return `n`.
2. Sort `nums`.
3. Traverse through each element:

   * Adjust `x` to be as small as possible but still greater than the previous chosen value.
   * Count it as distinct if possible.
4. Return the total count.

---

### ‚è±Ô∏è Complexity

* **Time:** `O(n log n)` (sorting)
* **Space:** `O(1)`

